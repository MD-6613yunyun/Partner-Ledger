<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <link rel="stylesheet" href="{{url_for('static',filename='css/style.css')}}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
</head>
<body>

        <div class="m-3">
            <div class="filters">
                <div class="dropdown" >
                    <button class="btn btn-secondary dropdown-toggle button-74 text-white" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Account Type
                    </button>
                    <div class="dropdown-menu" style="font-size: 13px;width: 20px;">
                        <div class="form-check">
                            <input class="form-check-input m-1" type="checkbox" id="payCheckBox" value="option1">
                            <label class="form-check-label" for="checkbox1">
                            Payable
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input m-1" type="checkbox" id="recvCheckBox" value="option2">
                            <label class="form-check-label" for="checkbox2">
                            Receivable
                            </label>
                        </div>                
                    </div>
                </div>
            </div>
            <div class="filters">
                <button class="btn btn-secondary button-74 text-white" type="button"  id="recOrunrec" onclick="reconcile(this)">
                    Show All Entries
                </button>
            </div>
            <div class="filters">
                <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle button-74 text-white" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Account Status
                    </button>
                    <div class="dropdown-menu" style="font-size: 13px;width: 20px;">
                        <div class="form-check">
                            <input class="form-check-input m-1" type="checkbox" id="postCheckBox" value="option1">
                            <label class="form-check-label" for="checkbox1">
                            Posted
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input m-1" type="checkbox" id="draftCheckBox" value="option2">
                            <label class="form-check-label" for="checkbox2">
                            Unposted
                            </label>
                        </div>                
                    </div>
                </div>
            </div>
            <div class="filters">
                <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle button-74 text-white" shopID="False" id="bi" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Business Unit
                    </button>
                    <div class="dropdown-menu business-unit" style="font-size: 13px;width: 20px;">
                        <input type="text" size="17"  style="margin-left: 10px;" onkeyup="getShops(this)"/>
                        <div style="max-height: 150px;overflow-y: auto;display: none;">
                            {% for data in units %}
                                <p class="m-1 ms-2" shopID="['{{data[0]}}','{{data[1]}}']" onclick="assignShop(this)">{{data[1]}}</p>
                            {% endfor %}
                            <p class="m-1 ms-2" shopID="False" onclick="assignShop(this)">No filter ( Unit )</p>                               
                        </div>
                    </div>
                </div>
            </div>
            <div class="filters">
                <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle button-74 text-white" id="pc" shopID="False" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Project Code
                    </button>
                    <div class="dropdown-menu business-unit" style="font-size: 13px;width: 20px;">
                        <input type="text" size="17" style="margin-left: 10px;" onkeyup="getShops(this)"/>
                        <div style="max-height: 150px;overflow-y: auto;display: none;">
                            {% for data in pj_codes %}
                                <p class="m-1 ms-2" shopID="{{data[0]}}" onclick="assignShop(this)">{{data[1]}}</p>
                            {% endfor %}  
                            <p class="m-1 ms-2" shopID="False" onclick="assignShop(this)">No filter ( Project Codes )</p>                               
                        </div>                                 
                    </div>
                </div>
            </div>
            <div class="filters">
                <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle button-74 text-white" id="shop" shopID="False" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Shop
                    </button>
                    <div class="dropdown-menu business-unit" style="font-size: 13px;width: 20px;">
                        <input type="text" size="17" style="margin-left: 10px;" onkeyup="getShops(this)"/>
                        <div style="max-height: 150px;overflow-y: auto; display: none;">
                            {% for data in shops %}
                                <p class="m-1 ms-2" shopID="['{{data[0]}}','{{data[1]}}']" onclick="assignShop(this)">{{data[1]}}</p> 
                            {% endfor %}
                            <!-- <p class="m-1 ms-2" shopID="['33','MANDALAY']" onclick="assignShop(this)">MANDALAY</p>  
                            <p class="m-1 ms-2" shopID="['16','SHWEPYITHAR (HEAD OFFICE)']" onclick="assignShop(this)">SHWEPYITHAR (HEAD OFFICE)</p> 
                            <p class="m-1 ms-2" shopID="['17','BAYINTNAUNG']" onclick="assignShop(this)">BAYINTNAUNG</p> 
                            <p class="m-1 ms-2" shopID="['18','SANCHAUNG']" onclick="assignShop(this)">SANCHAUNG</p> 
                            <p class="m-1 ms-2" shopID="['19','THINGANGYUN']" onclick="assignShop(this)">THINGANGYUN</p>
                            <p class="m-1 ms-2" shopID="['20','AUNGMINGALAR']" onclick="assignShop(this)">AUNGMINGALAR</p> 
                            <p class="m-1 ms-2" shopID="['21','NAYPYITAW']" onclick="assignShop(this)">NAYPYITAW</p>  
                            <p class="m-1 ms-2" shopID="['22','MONYWA']" onclick="assignShop(this)">MONYWA</p>  
                            <p class="m-1 ms-2" shopID="['23','TAUNGGYI']" onclick="assignShop(this)">TAUNGGYI</p> 
                            <p class="m-1 ms-2" shopID="['24','PIT & GO BGO']" onclick="assignShop(this)">PIT & GO BGO</p> 
                            <p class="m-1 ms-2" shopID="['25','PIT & GO SKP']" onclick="assignShop(this)">PIT & GO SKP</p> 
                            <p class="m-1 ms-2" shopID="['26','PIT & GO BAWGA']" onclick="assignShop(this)">PIT & GO BAWGA</p>
                            <p class="m-1 ms-2" shopID="['27','TYOYTA BAWGA']" onclick="assignShop(this)">TYOYTA BAWGA</p> 
                            <p class="m-1 ms-2" shopID="['32','PYAY']" onclick="assignShop(this)">PYAY</p>  
                            <p class="m-1 ms-2" shopID="['28','Other Shop 13']" onclick="assignShop(this)">Other Shop 13</p> 
                            <p class="m-1 ms-2" shopID="['29','Other Shop 14']" onclick="assignShop(this)">Other Shop 14</p> 
                            <p class="m-1 ms-2" shopID="['30','Other Shop 15']" onclick="assignShop(this)">Other Shop 15</p> 
                            <p class="m-1 ms-2" shopID="['31','Other Shop 16']" onclick="assignShop(this)">Other Shop 16</p>     -->
                            <p class="m-1 ms-2" shopID="False" onclick="assignShop(this)">No filter ( Shops )</p>                                 
                        </div>                                    
                    </div>
                </div>
            </div>
            <div class="filters">
                <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle button-74 text-white" id="changeDate" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Date
                    </button>
                    <div class="dropdown-menu business-unit" style="font-size: 13px;width: 20px;">
                        <p class="m-1 ms-2" onclick="dateChange(this)">Today</p> 
                        <p class="m-1 ms-2" onclick="dateChange(this)">This week</p> 
                        <p class="m-1 ms-2" onclick="dateChange(this)">This Month</p>  
                        <p class="m-1 ms-2" onclick="dateChange(this)">This Year</p> 

                        <input type="text" id="date-range-picker" size="17" style="margin-left: 10px;"/>                                   
                    </div>
                </div>
            </div>
            <div class="filters">
                <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle button-74 text-white" id="own" shopID="False" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Owner
                    </button>
                    <div class="dropdown-menu business-unit" style="font-size: 13px;width: 20px;">
                        <input type="text" size="17" style="margin-left: 10px;" onkeyup="getShops(this)"/>
                        <div style="max-height: 150px;overflow-y: auto;display: none;">
                            {% for data in owners %}
                            <p class="m-1 ms-2" shopID="{{data[0]}}" onclick="assignShop(this)">{{data[1]}}</p>
                            {% endfor %}  
                            <p class="m-1 ms-2" shopID="False" onclick="assignShop(this)">No filter ( Owner )</p>                                
                        </div>                                 
                    </div>
                </div>
            </div>
            <div class="filters">
                <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle button-74 text-white" id="ptn" shopID="False" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Partners
                    </button>
                    <div class="dropdown-menu business-unit" style="font-size: 13px;width: 20px;">
                        <input type="text" size="17" style="margin-left: 10px;" onkeyup="getShops(this)"/>
                        <div style="max-height: 150px;overflow-y: auto;display: none;">
                            {% for data in partners %}
                            <p class="m-1 ms-2" shopID="{{data[0]}}" onclick="assignShop(this)">{{data[1]}}</p>
                            {% endfor %}   
                            <p class="m-1 ms-2" shopID="False" onclick="assignShop(this)">No filter ( Partner ) </p>                             
                        </div>                                 
                    </div>
                </div>
            </div>
            <div class="filters">
                <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle button-74 text-white" type="button" data-bs-toggle="dropdown" aria-expanded="false" style="width: 20px;"></button>
                    <div class="dropdown-menu business-unit" style="font-size: 13px;">
                        <p class="m-1 ms-2" onclick="getData(this,'normal')">Get Data</p>  
                        <p class="m-1 ms-2" onclick="getData(this,'excel')">Get Report Excel</p> 
                        <p class="m-1 ms-2" onclick="getData(this,'pdf')">Get Report PDF</p>                                  
                    </div>
                </div>
            </div>
            <div class="filters" >
                <button id="removePtnFilter" style="display: none;" class="btn btn-secondary button-74 text-white" type="button"  id="recOrunrec" onclick="rmvPTN()">
                    Remove Partner
                </button>
            </div>
        </div>

        <div class="container" id="partnerTable">
            
            <h1 class="header-partner" id="showModalPartner">Partner Ledger 🔎</h1>
            <h6 id="header-date"></h6>
            <div class="table-responsive table-container">
              <table class="table table-hover partner-table">
                <thead>
                  <tr class="table-secondary" style="position: sticky;top: 0;">
                    <th>Partner Name</th>
                    <th class="text-end">Initial Balance</th>
                    <th class="text-end">Debit</th>
                    <th class="text-end">Credit</th>
                    <th class="text-end">Balance</th>
                  </tr>
                  <tr class="table-dark" id="overall-displayer">
                    <th class="text-start">Overall</th>
                    <th class="text-end" >0.00 K</th>
                    <th class="text-end">0.00 K</th>
                    <th class="text-end">0.00 K</th>
                    <th class="text-end" >0.00 K</th>
                    </tr>
                </thead>
                <tbody id="dataTableBody">

                </tbody>
              </table>
            </div>
          </div>
            {% if admins[1] %}
            <p class="text-end m-3"><a class="link-opacity-100" href="{{url_for('admin.admin_home_authenticate')}}">Go To Admin Dashboard</a></p>
            {% endif %}
            <p class="text-end m-3"><a class="link-opacity-100" href="{{url_for('auth.handle_auth',typ='out')}}">MD - {{admins[0]}}</a></p>
            <div class="spinner" id="spinner" style="display: none;">
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <h1>⏳</h1>
            </div>
        
        <!-- Button trigger modal -->
    <button style="display: none;" type="button" class="btn btn-primary" id="modalClicker" data-bs-toggle="modal" data-bs-target="#staticBackdrop">Nani</button>
  
  <!-- Modal -->
  <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="staticBackdropLabel">Partner Ledger</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <input type="input" class="form__field" placeholder="Name" name="name" id='namePtn' required onkeyup="findPartners(this)" />
            <label for="name" class="form__label">Name</label>

            <ul class="list-group mt-2" id="partner-list" style="cursor: pointer;">
                
            </ul>
        </div>
        <div class="modal-footer">
          <!-- <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Get Data File</button> -->
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal" onclick="showOnlyPtn(this)">Check Data</button>
        </div>
      </div>
    </div>
  </div>

    
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/moment.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
        <script src="{{url_for('static',filename='js/main.js')}}"></script>
    </body>
</html>
